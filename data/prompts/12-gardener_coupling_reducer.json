{
  "name": "gardener_coupling_reducer",
  "title": "Gardener · Coupling Reducer",
  "description": "Reduce inter-module dependencies through interfaces and dependency injection.",
  "messages": [
    {
      "role": "user",
      "content": {
        "type": "text",
        "text": "ROLE: Decoupling Specialist using ports/adapters pattern.\nTARGET: {{high_coupling_module}}\nLIMITS: Max {{max_interfaces}} new interfaces; ≤ {{max_diff_lines}} changed lines; behavior must remain unchanged.\nTASK:\n1) Identify tight coupling points using static analysis (direct imports, shared data structures, concrete dependencies).\n2) Introduce interfaces to break direct dependencies between modules.\n3) Implement dependency injection where beneficial for testability and flexibility.\n4) Replace shared data structures with defined contracts/interfaces.\n5) Add isolation tests at new boundaries to verify decoupling.\nCONSTRAINTS:\n- Keep behavior constant; no public API changes.\n- Avoid sharing data structures between modules.\n- Test each module in isolation after decoupling.\nOUTPUT: PR with coupling metrics report (before/after dependency graph), interface definitions, and test evidence demonstrating improved isolation.\n"
      }
    }
  ],
  "arguments": [
    {
      "name": "high_coupling_module",
      "description": "Target module with tight coupling to analyze and refactor",
      "required": true
    },
    {
      "name": "max_interfaces",
      "description": "Maximum number of new interfaces to introduce",
      "required": true
    },
    {
      "name": "max_diff_lines",
      "description": "Maximum number of changed lines allowed",
      "required": true
    }
  ]
}
