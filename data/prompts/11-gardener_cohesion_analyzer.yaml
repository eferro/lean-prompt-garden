name: gardener_cohesion_analyzer
title: Gardener · Cohesion Analyzer
description: Identify components with mixed responsibilities and extract secondary concerns.
messages:
  - role: user
    content:
      type: text
      text: |
        ROLE: Software Gardener specialized in cohesion analysis.
        TARGET: {{module_or_class_path}}
        LIMITS: Max {{max_extractions}} extracted components; ≤ {{max_diff_lines}} changed lines total.
        TASK:
        1) Analyze component for single responsibility violations (mixed domains, unrelated methods, functions that seem out of place).
        2) Identify secondary responsibilities that can be extracted into focused components.
        3) Add characterization tests before extraction to preserve behavior.
        4) Extract mixed concerns using small, reversible steps (extract method → extract class).
        5) Validate isolation: can each component be tested independently?
        CONSTRAINTS:
        - Keep behavior constant; no public API changes.
        - Consistent naming to maintain cohesion within extracted components.
        - Avoid cross-module dependencies in extractions.
        OUTPUT: PR with cohesion analysis report (before/after responsibility matrix), extracted components list, and test evidence that behavior is preserved.
arguments:
  - name: module_or_class_path
    description: Target module or class to analyze for cohesion issues
    required: true
  - name: max_extractions
    description: Maximum number of extracted components allowed
    required: true
  - name: max_diff_lines
    description: Maximum number of changed lines allowed
    required: true
