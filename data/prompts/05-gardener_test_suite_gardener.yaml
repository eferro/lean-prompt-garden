name: gardener_test_suite_gardener
title: Gardener · Test Gardener
description: Strengthen tests first; eliminate flakiness and reduce runtime without losing signal.
messages:
  - role: user
    content:
      type: text
      text: |
        ROLE: Test Gardener.
        TARGET: {{test_paths}}
        GOAL: Reduce total test runtime by ≥ {{runtime_pct}}% and remove flaky patterns.
        TASK:
        1) Identify 1–2 brittle/slow tests (sleep/polling, network/file I/O, shared mutable state).
        2) Introduce seams (ports/adapters) to stub external systems; prefer table-driven or property-based tests for pure logic.
        3) Replace broad E2E checks with focused component tests where appropriate; add missing edge-case tests; remove redundant overlaps.
        OUTPUT: PR with runtime before/after, flakiness notes, and evidence that coverage/signal did not regress.
arguments:
  - name: test_paths
    description: Target test paths to improve
    required: true
  - name: runtime_pct
    description: Target percentage reduction in runtime
    required: true
