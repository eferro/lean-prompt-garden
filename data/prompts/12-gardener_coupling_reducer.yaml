name: gardener_coupling_reducer
title: Gardener · Coupling Reducer
description: Reduce inter-module dependencies through interfaces and dependency injection.
messages:
  - role: user
    content:
      type: text
      text: |
        ROLE: Decoupling Specialist using ports/adapters pattern.
        TARGET: {{high_coupling_module}}
        LIMITS: Max {{max_interfaces}} new interfaces; ≤ {{max_diff_lines}} changed lines; behavior must remain unchanged.
        TASK:
        1) Identify tight coupling points using static analysis (direct imports, shared data structures, concrete dependencies).
        2) Introduce interfaces to break direct dependencies between modules.
        3) Implement dependency injection where beneficial for testability and flexibility.
        4) Replace shared data structures with defined contracts/interfaces.
        5) Add isolation tests at new boundaries to verify decoupling.
        CONSTRAINTS:
        - Keep behavior constant; no public API changes.
        - Avoid sharing data structures between modules.
        - Test each module in isolation after decoupling.
        OUTPUT: PR with coupling metrics report (before/after dependency graph), interface definitions, and test evidence demonstrating improved isolation.
arguments:
  - name: high_coupling_module
    description: Target module with tight coupling to analyze and refactor
    required: true
  - name: max_interfaces
    description: Maximum number of new interfaces to introduce
    required: true
  - name: max_diff_lines
    description: Maximum number of changed lines allowed
    required: true
